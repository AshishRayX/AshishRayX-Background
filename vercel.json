const fs = require('fs');
const path = require('path');

module.exports = (req, res) => {
  const linksPath = path.join(__dirname, '..', 'links.json');
  let links = {};

  try {
    if (fs.existsSync(linksPath)) {
      links = JSON.parse(fs.readFileSync(linksPath, 'utf8'));
    }
  } catch (error) {
    console.error('Error reading links.json:', error);
  }

  const background = links.background || '';
  res.status(200).json({
    source: background,
    type: background.endsWith('.jpg') || background.endsWith('.png') ? 'image' : 'video'
  });
};
